(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[937],{8315:function(n,s,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/tutorials/json-parser-rust",function(){return e(7813)}])},4250:function(n,s,e){"use strict";e.d(s,{o:function(){return l}});var a=e(5893),c=e(8131),t=e.n(c);function l(n){var s=n.summary,e=n.children;return(0,a.jsxs)("details",{className:t().details,children:[(0,a.jsx)("summary",{className:t().summary,children:s}),(0,a.jsx)("div",{className:t().detailsContent,children:e})]})}},4789:function(n,s,e){"use strict";e.d(s,{G:function(){return i},t:function(){return o}});var a=e(7294),c=e(4184),t=e.n(c),l=e(7911);function o(){return a.useContext(l.B)}function i(n,s){var e=o();if(e){var a=e.colorScheme,c=n[s+"--dark"],l={};return c&&(l[c]="dark"===a),t()(n[s],l)}return""}},2544:function(n,s,e){"use strict";e.d(s,{k:function(){return p}});var a=e(5893),c=e(2962),t=new Map;t.set("Test","");var l=function(n){var s=n.title,e=t.get(s);return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.PB,{openGraph:{images:[{url:"".concat("").concat(e),width:2048,height:1152,alt:"Featured image for ".concat(s)}]},twitter:{handle:"@aTwitterHandle",cardType:"summary_large_image"}}),(0,a.jsx)("img",{src:e})]}):null},o=e(1274),i=e(7346),r=e.n(i);function p(n){var s=n.children,e=n.meta,t=e.title,i=e.tagline;return(0,a.jsxs)(o.Z,{title:t,description:i,children:[(0,a.jsx)(c.PB,{title:t,description:i}),(0,a.jsxs)("article",{className:r().container,children:[(0,a.jsx)("h1",{children:t}),(0,a.jsx)("p",{children:i}),(0,a.jsx)(l,{title:t}),(0,a.jsx)("section",{children:s})]})]})}},1274:function(n,s,e){"use strict";e.d(s,{Z:function(){return v}});var a=e(5893),c=e(9008),t=e.n(c),l=e(1664),o=e.n(l),i=e(1163),r=e(1517),p=e(4789),m=e(888),h=e(5675),d=e.n(h),u=e(7760),x=e.n(u);function j(){var n=(0,p.t)();if(!n)return(0,a.jsx)(a.Fragment,{});var s=n.colorScheme,e=n.toggleColorScheme;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d(),{src:"/images/header/sun.svg",height:"32px",width:"32px"}),(0,a.jsx)("label",{className:x().toggleLabel,children:(0,a.jsx)(m.Z,{checked:"dark"===s,onChange:function(){return e()},icons:!1})}),(0,a.jsx)(d(),{src:"/images/header/moon.svg",height:"32px",width:"32px"})]})}var k=e(8514),N=e.n(k);function f(){return(0,a.jsx)(r.Z,{children:(0,a.jsxs)("nav",{className:N().nav,children:[(0,a.jsx)("div",{children:(0,a.jsx)("h1",{children:(0,a.jsx)(o(),{href:"/",children:(0,a.jsx)("a",{children:"davimiku"})})})}),(0,a.jsxs)("ul",{className:N()["nav-links"],children:[(0,a.jsx)(g,{href:"/",linkText:"home"}),(0,a.jsx)(g,{href:"/projects",linkText:"projects"}),(0,a.jsx)(g,{href:"/blog",linkText:"blog"})]}),(0,a.jsx)("div",{className:N()["theme-container"],children:(0,a.jsx)(j,{})})]})})}function g(n){var s=n.href,e=n.linkText,c=(0,i.useRouter)().pathname===s?N()["nav-link-active"]:"";return(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:s,children:(0,a.jsx)("a",{className:c,children:e})})})}var w=e(4066),y=e.n(w);function v(n){var s=n.children,e=n.title,c=n.description,l=(0,p.G)(y(),"main");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t(),{children:[(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("meta",{charSet:"utf-8"}),(0,a.jsx)("meta",{name:"description",content:c}),(0,a.jsx)("title",{children:e}),(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/favicon/apple-touch-icon.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon/32x32.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon/16x16.png"}),(0,a.jsx)("link",{rel:"manifest",href:"/site.webmanifest"}),(0,a.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,a.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"true"}),(0,a.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400&display=swap",rel:"stylesheet"})]}),(0,a.jsx)(f,{}),(0,a.jsx)("main",{className:l,children:s})]})}},7813:function(n,s,e){"use strict";e.r(s),e.d(s,{meta:function(){return l}});var a=e(5893),c=e(2544),t=e(4250),l={title:"Tutorial: Writing a JSON parser in Rust",category:"tutorials",slug:"json-parser-rust",tagline:"Learn the fundamentals of lexing and parsing to build a JSON parser from scratch",tags:["Lexers","Parsers","Rust"],publishedOn:"2022-03-27"},o=function(n){var s=n.children;return(0,a.jsx)(c.k,{meta:l,children:s})};s.default=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=function(){var s=Object.assign({h2:"h2",p:"p",ul:"ul",li:"li",code:"code",a:"a",strong:"strong",pre:"pre",span:"span",h3:"h3",blockquote:"blockquote"},n.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h2,{children:"Understanding the JSON syntax and types"}),"\n",(0,a.jsx)(s.p,{children:"Types include"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["object (",(0,a.jsx)(s.code,{children:'{ "key": json_value }'}),")"]}),"\n",(0,a.jsxs)(s.li,{children:["array (",(0,a.jsx)(s.code,{children:"[ json_value, json_value ]"}),")"]}),"\n",(0,a.jsxs)(s.li,{children:["number (",(0,a.jsx)(s.code,{children:"2"}),", ",(0,a.jsx)(s.code,{children:"-2"}),", ",(0,a.jsx)(s.code,{children:"2.5"}),", ",(0,a.jsx)(s.code,{children:"2E+32"}),", ",(0,a.jsx)(s.code,{children:"2e-16"}),")"]}),"\n",(0,a.jsxs)(s.li,{children:["string (",(0,a.jsx)(s.code,{children:'"a string"'}),")"]}),"\n",(0,a.jsxs)(s.li,{children:["boolean (",(0,a.jsx)(s.code,{children:"true"})," or ",(0,a.jsx)(s.code,{children:"false"}),")"]}),"\n",(0,a.jsx)(s.li,{children:"null"}),"\n"]}),"\n",(0,a.jsxs)(t.o,{summary:"JSON syntax is a subset of Javascript syntax",children:[(0,a.jsxs)(s.p,{children:["As of ES2019, JSON syntax is a subset of Javascript syntax when ",(0,a.jsx)(s.a,{href:"https://github.com/tc39/proposal-json-superset",children:"unicode characters\nU+2028 and U+2029"})," are allowed to exist in JS strings unescaped."]}),(0,a.jsxs)(s.p,{children:["JSON is not necessarily a ",(0,a.jsx)(s.strong,{children:"semantic"})," subset of Javascript. For example, the following produces a different result when\nparsed as Javascript vs. JSON."]}),(0,a.jsx)(s.pre,{className:"language-javascript",children:(0,a.jsxs)(s.code,{className:"language-javascript",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"const"})," str ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsxs)(s.span,{className:"token template-string",children:[(0,a.jsx)(s.span,{className:"token template-punctuation string",children:"`"}),(0,a.jsx)(s.span,{className:"token string",children:'[{ "__proto__": [] }]'}),(0,a.jsx)(s.span,{className:"token template-punctuation string",children:"`"})]}),"\n\n",(0,a.jsx)(s.span,{className:"token keyword",children:"const"})," fromJS ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token function",children:"eval"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"str",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n",(0,a.jsx)(s.span,{className:"token keyword",children:"const"})," fromJSON ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token known-class-name class-name",children:"JSON"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token method function property-access",children:"parse"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"str",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n"]})}),(0,a.jsxs)(s.p,{children:["The ",(0,a.jsx)(s.code,{children:"fromJS"})," result is an array with one item, where that item is an Object that has Array as its prototype.\nThe ",(0,a.jsx)(s.code,{children:"fromJSON"})," result is also an array with one item, and that item is an Object who has an own property with\nan identifier of ",(0,a.jsx)(s.code,{children:"__proto__"})," (compare the result of ",(0,a.jsx)(s.code,{children:"Object.getOwnPropertyNames(x)"})," for each ",(0,a.jsx)(s.code,{children:"fromJS"})," and ",(0,a.jsx)(s.code,{children:"fromJSON"}),")."]})]}),"\n",(0,a.jsx)(s.h3,{children:"Defining the types for JSON values"}),"\n",(0,a.jsx)(s.p,{children:"Start with the easy values, the primitives:"}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"enum"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"Value"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"/// literal characters `null`"}),"\n  ",(0,a.jsx)(s.span,{className:"token class-name",children:"Null"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"/// literal characters `true` or `false`"}),"\n  ",(0,a.jsx)(s.span,{className:"token class-name",children:"Bool"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"bool"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n\n  ",(0,a.jsx)(s.span,{className:"token comment",children:'/// characters within double quotes "..."'}),"\n  ",(0,a.jsx)(s.span,{className:"token class-name",children:"String"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token class-name",children:"String"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsx)(s.p,{children:"Add on the non-primitives:"}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"enum"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"Value"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"/// literal characters `null`"}),"\n  ",(0,a.jsx)(s.span,{className:"token class-name",children:"Null"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"/// literal characters `true` or `false`"}),"\n  ",(0,a.jsx)(s.span,{className:"token class-name",children:"Bool"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"bool"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n\n  ",(0,a.jsx)(s.span,{className:"token comment",children:'/// characters within double quotes "..."'}),"\n  ",(0,a.jsx)(s.span,{className:"token class-name",children:"String"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token class-name",children:"String"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"/// Zero to many JSON values in an array"}),"\n  ",(0,a.jsx)(s.span,{className:"token class-name",children:"Array"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token class-name",children:"Vec"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Value"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"/// Key/value pairs"}),"\n  ",(0,a.jsx)(s.span,{className:"token class-name",children:"Object"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token class-name",children:"BTreeMap"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token class-name",children:"String"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Value"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsx)(s.p,{children:"Quiz: Which value is missing?"}),"\n",(0,a.jsxs)(s.p,{children:["Number is not quite straightforward in Rust, the available types are more granular. While the ",(0,a.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",children:"Number in Javascript"})," (and JSON!)\nrepresents a ",(0,a.jsx)(s.code,{children:"double"})," value, or in other words a 64-bit floating value as described in ",(0,a.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/IEEE_754",children:"IEEE 754"}),"."]}),"\n",(0,a.jsxs)(s.p,{children:["For our purposes, we will explore how to capture JSON numbers in two ways, as an integer ",(0,a.jsx)(s.code,{children:"i64"})," and as a floating value ",(0,a.jsx)(s.code,{children:"f64"}),"."]}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"enum"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"Number"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"/// Number without a fractional component"}),"\n  ",(0,a.jsx)(s.span,{className:"token class-name",children:"Int"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"i64"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"/// Number that has a fractional component"}),"\n  ",(0,a.jsx)(s.span,{className:"token class-name",children:"Float"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"f64"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsxs)(s.p,{children:["Finally, add this enum to our overall ",(0,a.jsx)(s.code,{children:"Value"})," enum."]}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"enum"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"Value"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"// ...snip..."}),"\n\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"/// Number value"}),"\n  ",(0,a.jsx)(s.span,{className:"token class-name",children:"Number"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token class-name",children:"Number"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsx)(s.h2,{children:"Writing the Lexer"}),"\n",(0,a.jsx)(s.h3,{children:"Creating the Token type"}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token attribute attr-name",children:"#[derive(Debug, PartialEq, Clone)]"}),"\n",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"enum"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"TokenKind"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token comment",children:"/// Literals"}),"\n    ",(0,a.jsx)(s.span,{className:"token class-name",children:"Int"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"i64"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token class-name",children:"Float"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"f64"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token class-name",children:"Null"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token class-name",children:"Bool"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token keyword",children:"bool"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n\n    ",(0,a.jsx)(s.span,{className:"token comment",children:"/// Key of the key/value pair or string value"}),"\n    ",(0,a.jsx)(s.span,{className:"token class-name",children:"String"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token class-name",children:"String"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n\n    ",(0,a.jsx)(s.span,{className:"token comment",children:"/// Punctuation"}),"\n    ",(0,a.jsx)(s.span,{className:"token class-name",children:"LeftBrace"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token class-name",children:"RightBrace"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token class-name",children:"LeftBracket"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token class-name",children:"RightBracket"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token class-name",children:"Comma"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n    ",(0,a.jsx)(s.span,{className:"token class-name",children:"Colon"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n\n    ",(0,a.jsx)(s.span,{className:"token constant",children:"EOF"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsxs)(s.p,{children:["OPTIONAL: Implement ",(0,a.jsx)(s.code,{children:"Display"})," for the Token.\nThis will allow having a custom format for printing the token out, which can be useful for debugging."]}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"example_print"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"token",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Token"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"// Requires `Display` to be implemented for Token"}),"\n  ",(0,a.jsx)(s.span,{className:"token macro property",children:"println!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"{}"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," token",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"// Requires `Debug` to be implemented for Token, which can be derived automatically"}),"\n  ",(0,a.jsx)(s.span,{className:"token macro property",children:"println!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"{:?}"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," token",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"use"})," ",(0,a.jsxs)(s.span,{className:"token namespace",children:["std",(0,a.jsx)(s.span,{className:"token punctuation",children:"::"})]}),"fmt",(0,a.jsx)(s.span,{className:"token punctuation",children:";"}),"\n\n",(0,a.jsx)(s.span,{className:"token comment",children:"// ...snip..."}),"\n\n",(0,a.jsx)(s.span,{className:"token keyword",children:"impl"})," ",(0,a.jsxs)(s.span,{className:"token namespace",children:["fmt",(0,a.jsx)(s.span,{className:"token punctuation",children:"::"})]}),(0,a.jsx)(s.span,{className:"token class-name",children:"Display"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"for"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"TokenKind"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"fmt"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," f",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," ",(0,a.jsxs)(s.span,{className:"token namespace",children:["fmt",(0,a.jsx)(s.span,{className:"token punctuation",children:"::"})]}),(0,a.jsx)(s.span,{className:"token class-name",children:"Formatter"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsxs)(s.span,{className:"token namespace",children:["fmt",(0,a.jsx)(s.span,{className:"token punctuation",children:"::"})]}),(0,a.jsx)(s.span,{className:"token class-name",children:"FmtResult"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n        ",(0,a.jsx)(s.span,{className:"token keyword",children:"match"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n            ",(0,a.jsx)(s.span,{className:"token class-name",children:"TokenKind"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"LeftBracket"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," f",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"write_char"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token char",children:"'['"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n            ",(0,a.jsx)(s.span,{className:"token class-name",children:"TokenKind"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"RightBracket"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," f",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"write_char"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token char",children:"']'"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n            ",(0,a.jsx)(s.span,{className:"token class-name",children:"TokenKind"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"LeftBrace"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," f",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"write_char"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token char",children:"'{'"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n            ",(0,a.jsx)(s.span,{className:"token class-name",children:"TokenKind"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"RightBrace"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," f",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"write_char"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token char",children:"'}'"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n            ",(0,a.jsx)(s.span,{className:"token class-name",children:"TokenKind"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Comma"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," f",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"write_char"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token char",children:"','"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n            ",(0,a.jsx)(s.span,{className:"token class-name",children:"TokenKind"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Colon"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," f",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"write_char"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token char",children:"':'"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n            ",(0,a.jsx)(s.span,{className:"token class-name",children:"TokenKind"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"String"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"val",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token macro property",children:"write!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"f",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token string",children:'"{:?}"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," val",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n            ",(0,a.jsx)(s.span,{className:"token class-name",children:"TokenKind"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Int"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"val",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token macro property",children:"write!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"f",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token string",children:'"{:?}"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," val",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n            ",(0,a.jsx)(s.span,{className:"token class-name",children:"TokenKind"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Float"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"val",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token macro property",children:"write!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"f",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token string",children:'"{:?}"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," val",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n            ",(0,a.jsx)(s.span,{className:"token class-name",children:"TokenKind"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Bool"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"val",(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," ",(0,a.jsx)(s.span,{className:"token macro property",children:"write!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"f",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token string",children:'"{:?}"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," val",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n            ",(0,a.jsx)(s.span,{className:"token class-name",children:"TokenKind"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Null"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," f",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"write_str"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"null"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n            ",(0,a.jsx)(s.span,{className:"token class-name",children:"TokenKind"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"::"}),(0,a.jsx)(s.span,{className:"token constant",children:"EOF"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"=>"})," f",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"write_str"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token string",children:'"EOF"'}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n\n",(0,a.jsx)(s.span,{className:"token keyword",children:"impl"})," ",(0,a.jsxs)(s.span,{className:"token namespace",children:["fmt",(0,a.jsx)(s.span,{className:"token punctuation",children:"::"})]}),(0,a.jsx)(s.span,{className:"token class-name",children:"Display"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"for"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Token"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token keyword",children:"fn"})," ",(0,a.jsx)(s.span,{className:"token function-definition function",children:"fmt"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","})," f",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"&"}),(0,a.jsx)(s.span,{className:"token keyword",children:"mut"})," ",(0,a.jsxs)(s.span,{className:"token namespace",children:["fmt",(0,a.jsx)(s.span,{className:"token punctuation",children:"::"})]}),(0,a.jsx)(s.span,{className:"token class-name",children:"Formatter"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"->"})," ",(0,a.jsxs)(s.span,{className:"token namespace",children:["fmt",(0,a.jsx)(s.span,{className:"token punctuation",children:"::"})]}),(0,a.jsx)(s.span,{className:"token class-name",children:"Result"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n        f",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token function",children:"write_fmt"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token macro property",children:"format_args!"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"\n            ",(0,a.jsx)(s.span,{className:"token string",children:"\"token '{}' at row {}, col {}\""}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n            ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"kind",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"location",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"row",(0,a.jsx)(s.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"self"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"location",(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),"col",(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n        ",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),"\n    ",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n\n"]})}),"\n",(0,a.jsxs)(s.h3,{children:["Rust Traits: The ",(0,a.jsx)(s.code,{children:"Iterator"})]}),"\n",(0,a.jsxs)(s.p,{children:["We'll first start be defining the ",(0,a.jsx)(s.code,{children:"struct"})," for the Lexer, which will take the character input and output our ",(0,a.jsx)(s.code,{children:"Token"}),"s."]}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"struct"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"Lexer"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token class-name",children:"I"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Iterator"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Item"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"char"}),(0,a.jsx)(s.span,{className:"token operator",children:">>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"/// Iterator for chars from the input"}),"\n  char_iter",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"I"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsxs)(s.p,{children:["At first, this syntax can be confusing without much experience with Rust or other languages with generics. In this case, ",(0,a.jsx)(s.code,{children:"I"})," represents\na generic type parameter which can be anything is an ",(0,a.jsx)(s.code,{children:"Iterator"})," for ",(0,a.jsx)(s.code,{children:"char"}),"acters."]}),"\n",(0,a.jsx)(s.p,{children:"A more explicit (and semantically equivalent) way of writing this is below."}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"struct"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"Lexer"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token class-name",children:"I"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),"\n",(0,a.jsx)(s.span,{className:"token keyword",children:"where"}),"\n    ",(0,a.jsx)(s.span,{className:"token class-name",children:"I"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Iterator"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Item"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"char"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n  ",(0,a.jsx)(s.span,{className:"token comment",children:"/// Iterator for chars from the input"}),"\n  char_iter",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"I"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsx)(s.p,{children:"We'll want a few other fields in the lexer."}),"\n",(0,a.jsx)(s.pre,{className:"language-rust",children:(0,a.jsxs)(s.code,{className:"language-rust",children:[(0,a.jsx)(s.span,{className:"token comment",children:"/// The Lexer produces tokens from the character input"}),"\n",(0,a.jsx)(s.span,{className:"token keyword",children:"pub"})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"struct"})," ",(0,a.jsx)(s.span,{className:"token type-definition class-name",children:"Lexer"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token class-name",children:"I"}),(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Iterator"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token class-name",children:"Item"})," ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsx)(s.span,{className:"token keyword",children:"char"}),(0,a.jsx)(s.span,{className:"token operator",children:">>"})," ",(0,a.jsx)(s.span,{className:"token punctuation",children:"{"}),"\n    ",(0,a.jsx)(s.span,{className:"token comment",children:"/// Iterator for chars from the input"}),"\n    char_iter",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"I"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n\n    ",(0,a.jsx)(s.span,{className:"token comment",children:"/// Current Location (row/col) of the lexer in the input"}),"\n    location",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Location"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n\n    ",(0,a.jsx)(s.span,{className:"token comment",children:"/// The current character in the iterator"}),"\n    curr",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Option"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"char"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n\n    ",(0,a.jsx)(s.span,{className:"token comment",children:"/// The next character in the iterator"}),"\n    next",(0,a.jsx)(s.span,{className:"token punctuation",children:":"})," ",(0,a.jsx)(s.span,{className:"token class-name",children:"Option"}),(0,a.jsx)(s.span,{className:"token operator",children:"<"}),(0,a.jsx)(s.span,{className:"token keyword",children:"char"}),(0,a.jsx)(s.span,{className:"token operator",children:">"}),(0,a.jsx)(s.span,{className:"token punctuation",children:","}),"\n",(0,a.jsx)(s.span,{className:"token punctuation",children:"}"}),"\n"]})}),"\n",(0,a.jsx)(s.h2,{children:"Writing the Parser"}),"\n",(0,a.jsx)(s.h2,{children:"The nitty gritty"}),"\n",(0,a.jsx)(s.h3,{children:"Objects with duplicate keys"}),"\n",(0,a.jsx)(s.p,{children:"The RFC specifies that the names within an object SHOULD be unique,\nhttps://datatracker.ietf.org/doc/html/rfc8259"}),"\n",(0,a.jsxs)(s.blockquote,{children:["\n",(0,a.jsx)(s.p,{children:"An object whose names are all unique is interoperable in the sense\nthat all software implementations receiving that object will agree on\nthe name-value mappings. When the names within an object are not\nunique, the behavior of software that receives such an object is\nunpredictable. Many implementations report the last name/value pair\nonly. Other implementations report an error or fail to parse the\nobject, and some implementations report all of the name/value pairs,\nincluding duplicates."}),"\n"]}),"\n",(0,a.jsx)(s.pre,{className:"language-javascript",children:(0,a.jsxs)(s.code,{className:"language-javascript",children:[(0,a.jsx)(s.span,{className:"token keyword",children:"const"})," str ",(0,a.jsx)(s.span,{className:"token operator",children:"="})," ",(0,a.jsxs)(s.span,{className:"token template-string",children:[(0,a.jsx)(s.span,{className:"token template-punctuation string",children:"`"}),(0,a.jsx)(s.span,{className:"token string",children:'{"a": 1, "a": 2}'}),(0,a.jsx)(s.span,{className:"token template-punctuation string",children:"`"})]}),"\n\n",(0,a.jsx)(s.span,{className:"token console class-name",children:"console"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token method function property-access",children:"log"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),(0,a.jsx)(s.span,{className:"token known-class-name class-name",children:"JSON"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"."}),(0,a.jsx)(s.span,{className:"token method function property-access",children:"parse"}),(0,a.jsx)(s.span,{className:"token punctuation",children:"("}),"str",(0,a.jsx)(s.span,{className:"token punctuation",children:")"}),(0,a.jsx)(s.span,{className:"token punctuation",children:")"})," ",(0,a.jsx)(s.span,{className:"token comment",children:"// --\x3e { a: 2 }"}),"\n"]})}),"\n",(0,a.jsx)(s.h3,{children:"Object Key Ordering"})]})};return o?(0,a.jsx)(o,Object.assign({},n,{children:(0,a.jsx)(s,{})})):s()}},8131:function(n){n.exports={details:"Spoiler_details__gotJo",detailsContent:"Spoiler_detailsContent__yhV_z",summary:"Spoiler_summary__6Nxkr"}},8514:function(n){n.exports={nav:"Header_nav__70yDD","nav-links":"Header_nav-links__w6Ltd","nav-link-active":"Header_nav-link-active__E_lS6","theme-container":"Header_theme-container__PGNgu"}},7760:function(n){n.exports={toggleLabel:"Toggle_toggleLabel__0bMk0"}},4066:function(n){n.exports={main:"Layout_main__gmMSA","main--dark":"Layout_main--dark__zjKmX"}},7346:function(n){n.exports={container:"blog_container__mTn9i"}}},function(n){n.O(0,[294,238,774,888,179],(function(){return s=8315,n(n.s=s);var s}));var s=n.O();_N_E=s}]);